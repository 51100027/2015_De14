<!DOCTYPE html>
<html>
  <head>
		<meta charset="utf-8">
		<title>Slider</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
	  	<link rel="stylesheet" href="css/bootstrap.min.css">
	  	<link rel="stylesheet" type="text/css" href="css/style.css">
	  	<script src="js/jquery.min.js"></script>
	  	<script src="js/bootstrap.min.js"></script>

	  	<script type="text/javascript" src="js/jssor.js"></script>
    	<script type="text/javascript" src="js/jssor.slider.js"></script>
    	<script>
	        init_jssor_slider1 = function (containerId) {
	            var options = {
	                $AutoPlay: false,                                   //[Optional] Whether to auto play, to enable slideshow, this option must be set to true, default value is false
	                $SlideDuration: 500,                                //[Optional] Specifies default duration (swipe) for slide in milliseconds, default value is 500

	                $ThumbnailNavigatorOptions: {                       //[Optional] Options to specify and enable thumbnail navigator or not
	                    $Class: $JssorThumbnailNavigator$,              //[Required] Class to create thumbnail navigator instance
	                    $ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always

	                    $ActionMode: 1,                                 //[Optional] 0 None, 1 act by click, 2 act by mouse hover, 3 both, default value is 1
	                    $SpacingX: 8,                                   //[Optional] Horizontal space between each thumbnail in pixel, default value is 0
	                    $DisplayPieces: 10,                             //[Optional] Number of pieces to display, default value is 1
	                    $ParkingPosition: 360                           //[Optional] The offset position to park thumbnail
	                }
	            };

	            var jssor_slider1 = new $JssorSlider$(containerId, options);
	        };
    	</script>

    	<script>
	        init_jssor_thum = function (containerId) {
	            var options = {
	                $AutoPlay: false,                                   //[Optional] Whether to auto play, to enable slideshow, this option must be set to true, default value is false
	                $SlideDuration: 500,                                //[Optional] Specifies default duration (swipe) for slide in milliseconds, default value is 500

	                $ThumbnailNavigatorOptions: {                       //[Optional] Options to specify and enable thumbnail navigator or not
	                    $Class: $JssorThumbnailNavigator$,              //[Required] Class to create thumbnail navigator instance
	                    $ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always

	                    $ActionMode: 1,                                 //[Optional] 0 None, 1 act by click, 2 act by mouse hover, 3 both, default value is 1
	                    $SpacingX: 8,                                   //[Optional] Horizontal space between each thumbnail in pixel, default value is 0
	                    $DisplayPieces: 16,                             //[Optional] Number of pieces to display, default value is 1
	                    $ParkingPosition: 360                           //[Optional] The offset position to park thumbnail
	                }
	            };

	            var jssor_thum = new $JssorSlider$(containerId, options);
	        };
    	</script>

	  	<link rel="stylesheet" type="text/css" href="css/progress_step.css">

	  	<link rel="stylesheet" type="text/css" href="css/image_gallery.css">

	  	<script type="text/javascript">

	  		var fbResponse;
	  		// This is called with the results from from FB.getLoginStatus().
			function statusChangeCallback(response) {
			    console.log('statusChangeCallback');
			    console.log(response);
			    // The response object is returned with a status field that lets the
			    // app know the current login status of the person.
			    // Full docs on the response object can be found in the documentation
			    // for FB.getLoginStatus().
			    if (response.status === 'connected') {
			      // Logged into your app and Facebook.
			      fetchUserAlbums();	
			    } else if (response.status === 'not_authorized') {
			      // The person is logged into Facebook, but not your app.
			    } else {
			      // The person is not logged into Facebook, so we're not sure if
			      // they are logged into this app or not.
			    }
			  }

			  // This function is called when someone finishes with the Login
			  // Button.  See the onlogin handler attached to it in the sample
			  // code below.
			  function checkLoginState() {
			    FB.getLoginStatus(function(response) {
			      statusChangeCallback(response);
			    });
			  }

			  window.fbAsyncInit = function() {
			  FB.init({
			    appId      : '388013708073548',
			    cookie     : true,  // enable cookies to allow the server to access 
			                        // the session
			    xfbml      : true,  // parse social plugins on this page
			    version    : 'v2.2' // use version 2.2
			  });

			  // Now that we've initialized the JavaScript SDK, we call 
			  // FB.getLoginStatus().  This function gets the state of the
			  // person visiting this page and can return one of three states to
			  // the callback you provide.  They can be:
			  //
			  // 1. Logged into your app ('connected')
			  // 2. Logged into Facebook, but not your app ('not_authorized')
			  // 3. Not logged into Facebook and can't tell if they are logged into
			  //    your app or not.
			  //
			  // These three cases are handled in the callback function.

			  FB.getLoginStatus(function(response) {
			    statusChangeCallback(response);
			  });

			  };

			  // Load the SDK asynchronously
			  (function(d, s, id) {
			    var js, fjs = d.getElementsByTagName(s)[0];
			    if (d.getElementById(id)) return;
			    js = d.createElement(s); js.id = id;
			    js.src = "//connect.facebook.net/en_US/sdk.js";
			    fjs.parentNode.insertBefore(js, fjs);
			  }(document, 'script', 'facebook-jssdk'));

			  // Here we run a very simple test of the Graph API after login is
			  // successful.  See statusChangeCallback() for when this call is made.

			var selected_photos = {
			    photo: []
			};
			var fbResponse;	    
			function fetchUserAlbums() {
			    FB.api('/me/albums', function(response) {
			    	console.log(response);
			    	fbResponse = response;
			    	
			    	for(var i = 0;i<response.data.length;i++){
		  				var newOption = document.createElement("option");
		  				newOption.value = response.data[i].id;
		  				var newAlbumName = document.createTextNode(response.data[i].name);
		  				newOption.appendChild(newAlbumName);
		  				document.getElementById("albumSelector").appendChild(newOption);
	  				}			      	
			    });
			}

			function fetchAlbumPhotos(){
				document.getElementById("image_gallery").innerHTML = "";
				var e = document.getElementById("albumSelector");
    			var albumId = e.options[e.selectedIndex].value;
    			var query = albumId+"/photos";
    			//alert(query);
    			FB.api(query,function(response){
    				console.log(response);

    				for(var i = 0;i<response.data.length;i++){
		  				addNewImage(response.data[i].picture, response.data[i].id, response.data[i].source);
	  				}
	  				numberImage();	
    			});
			}

			function addNewImage(cover_link, image_id, image_link){
				var imageContainer = document.createElement("div");
				imageContainer.className = "img";
				imageContainer.id = image_id;
				var image = document.createElement("img");
				image.src = cover_link;
				image.alt = "";
				image.width = "180";
				image.height = "160";
				image.onclick = function() {toggleSelecImage(image_id, image_link)};
				imageContainer.appendChild(image);

				var number_container = document.createElement("div");
				var number = document.createTextNode("chưa chọn");
				number_container.className = "desc";
				number_container.id = "number_"+image_id;
				number_container.appendChild(number);
				imageContainer.appendChild(number_container);
				document.getElementById("image_gallery").appendChild(imageContainer);
			}			
			function toggleSelecImage(image_id, image_link){
				//alert(image_id);
				var isSelected = false;
				var index = 0;
				for(index = 0;index<selected_photos.photo.length;index++){
					if(selected_photos.photo[index].id == image_id){
						isSelected = true;
						break;
					}
				}
				if(!isSelected){
					document.getElementById(image_id).className = "img_selected";
					selected_photos.photo.push({ 
				        "id" 	: image_id,
				        "link"  : image_link
				    });
				}
				else{
					document.getElementById(image_id).className = "img";
					document.getElementById("number_"+selected_photos.photo[index].id).innerHTML = "chưa chọn";
					//alert(index);
					selected_photos.photo.splice(index,1);
					//selected_photos.photo.length--;
				}
			    console.log(selected_photos);
			    numberImage();
			}

			function numberImage(){
				for(var i=0;i<selected_photos.photo.length;i++){
					if(document.getElementById("number_"+selected_photos.photo[i].id) != null){					
						document.getElementById("number_"+selected_photos.photo[i].id).innerHTML = i+1;
						document.getElementById(selected_photos.photo[i].id).className = "img_selected";
					}
				}
			}

			function isSelected(image_id){
				var isSelected = false;
				var index = 0;
				for(index = 0;index<selected_photos.photo.length;index++){
					if(selected_photos.photo[index].id == image_id){
						isSelected = true;
						break;
					}
				}
				return isSelected;
			}

			function selectAllCurrentPhoto(){

			}
	  	</script>

  </head>

  <body style="padding: 0; margin: 0; font-family:Arial, Verdana;background-color:#fff;">
  	<div class="row bs-wizard" style="border-bottom:0;">
                
        <div class="col-xs-3 bs-wizard-step active">
          <div class="text-center bs-wizard-stepnum">Nhập ảnh</div>
          <div class="progress"><div class="progress-bar"></div></div>
          <a href="#" class="bs-wizard-dot"></a>
        </div>
        
        <div class="col-xs-3 bs-wizard-step disabled"><!-- complete -->
          <div class="text-center bs-wizard-stepnum">Tạo hiệu ứng</div>
          <div class="progress"><div class="progress-bar"></div></div>
          <a href="#" class="bs-wizard-dot"></a>
          
        </div>
        
        <div class="col-xs-3 bs-wizard-step disabled"><!-- complete -->
          <div class="text-center bs-wizard-stepnum">Thêm nhạc</div>
          <div class="progress"><div class="progress-bar"></div></div>
          <a href="#" class="bs-wizard-dot"></a>
        </div>
        
        <div class="col-xs-3 bs-wizard-step disabled"><!-- active -->
          <div class="text-center bs-wizard-stepnum">Hoàn thành</div>
          <div class="progress"><div class="progress-bar"></div></div>
          <a href="#" class="bs-wizard-dot"></a>
        </div>
	 </div>

	<div class="col-sm-4">
	 	<div id = "albumPicker">
		 	<div class="form-group" style="margin-top: 35px">
			  <select class="form-control" id="albumSelector" onchange="fetchAlbumPhotos()">
			    <option>--Chọn album--</option>
			  </select>
			</div>
		</div>
	</div>

	 <div id="slider1_container" style="position: relative; top: 0px; left: 0px; width: 740px; margin: 0 auto;
        height: 400px; background: #24262e; overflow: hidden;">

        <!-- Loading Screen -->
        <div u="loading" style="position: absolute; top: 0px; left: 0px;">
            <div style="filter: alpha(opacity=70); opacity:0.7; position: absolute; display: block;
                background-color: #000000; top: 0px; left: 0px;width: 100%;height:100%;">
            </div>
            <div style="position: absolute; display: block; background: url(images/loading.gif) no-repeat 50% 50%;
                top: 0px; left: 0px;width: 100%;height:100%;">
            </div>
        </div>

        <!-- Slides Container -->
        <div u="slides" style="cursor: move; position: absolute; left: 0px; top: 0px; width: 740px; height: 300px; overflow: hidden;">
            <div>
                <img u="image" src="images/homeSlide/1.jpg" />
                <img u="thumb" src="images/homeSlide/1.jpg" />
            </div>
            <div>
                <img u="image" src="images/homeSlide/2.jpg" />
                <img u="thumb" src="images/homeSlide/2.jpg" />
            </div>
            <div>
                <img u="image" src="images/homeSlide/3.jpg" />
                <img u="thumb" src="images/homeSlide/3.jpg" />
            </div>
            <div>
                <img u="image" src="images/homeSlide/4.jpg" />
                <img u="thumb" src="images/homeSlide/4.jpg" />
            </div>
            <div>
                <img u="image" src="images/homeSlide/5.jpg" />
                <img u="thumb" src="images/homeSlide/5.jpg" />
            </div>
            <div>
                <img u="image" src="images/homeSlide/6.jpg" />
                <img u="thumb" src="images/homeSlide/6.jpg" />
            </div>
            <div>
                <img u="image" src="images/homeSlide/7.jpg" />
                <img u="thumb" src="images/homeSlide/7.jpg" />
            </div>
        </div>
        
        <!--#region Thumbnail Navigator Skin Begin -->
        <!-- Help: http://www.jssor.com/development/slider-with-thumbnail-navigator-jquery.html -->
        

        <!-- thumbnail navigator container -->
        <div u="thumbnavigator" class="jssort01" style="left: 0px; bottom: 0px;">
            <!-- Thumbnail Item Skin Begin -->
            <div u="slides" style="cursor: default;">
                <div u="prototype" class="p">
                    <div class=w><div u="thumbnailtemplate" class="t"></div></div>
                    <div class=c></div>
                </div>
            </div>
            <!-- Thumbnail Item Skin End -->
        </div>
        <!--#endregion Thumbnail Navigator Skin End -->
        <script>
            init_jssor_slider1("slider1_container");
        </script>
    </div>
    <!--#endregion Jssor Slider End -->
    <div class="buttonspace"></div>

	 <!-- <div class="panel panel-default"><div class="panel-body" id = "image_gallery"></div> -->

	 <div class="container-fluid">
	 	<div class="col-sm-3" >
	    	<h4>Ảnh đã chọn</h4>
	 	</div>
    	<div class="col-sm-3" >
	    	<div style="float: right;">
			 	<button type="button" class="btn btn-primary" onclick="">Chọn ảnh</button>
			 	<button type="button" class="btn btn-warning" onclick = "unselectAllCurrentPhoto()">Bỏ chọn</button>
		 	</div>
	 	</div>
	 	<div class="col-sm-6" >
	    	<div style="float: right;">
			 	<button type="button" class="btn btn-success" onclick = "selectAllCurrentPhoto()">Chọn tất cả</button>
			 	<button type="button" class="btn btn-danger" onclick = "unselectAllPhoto()">Bỏ tất cả các ảnh đã chọn</button>
		 	</div>
	 	</div>
	</div>

	 <div class="buttonspace"></div>

	 <div id="thumb_container" style="position: relative; top: 0px; left: 0px; width: 94%; margin: 0 auto;
        height: 100px; background: #24262e; overflow: hidden;">

        <div u="slides" style="cursor: move; position: absolute; left: 0px; top: 0px; width: 100px; height: 100px; overflow: hidden;">
            <div>
                <img u="thumb" src="images/homeSlide/1.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/2.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/3.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/4.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/5.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/6.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/7.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/1.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/2.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/3.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/4.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/5.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/6.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/7.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/1.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/2.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/3.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/4.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/5.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/6.jpg" />
            </div>
            <div>
                <img u="thumb" src="images/homeSlide/7.jpg" />
            </div>

        </div>

        <!-- thumbnail navigator container -->
        <div u="thumbnavigator" class="jssort01" style="left: 0px; bottom: 0px;">
            <!-- Thumbnail Item Skin Begin -->
            <div u="slides" style="cursor: default;">
                <div u="prototype" class="p">
                    <div class=w><div u="thumbnailtemplate" class="t"></div></div>
                </div>
            </div>
            <!-- Thumbnail Item Skin End -->
        </div>
        <!--#endregion Thumbnail Navigator Skin End -->
        <script>
            init_jssor_thum("thumb_container");
        </script>
    </div>
    <!--#endregion Jssor Slider End -->

    <div class="buttonspace"></div>

    <div class="container-fluid">
    	<div class="col-sm-12">
			<button type="button" class="btn btn-primary" style="float: right;">Tạo hiệu ứng</button>
		</div>
	</div>
</body>
</html>